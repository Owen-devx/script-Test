local UserInputService = game:GetService("UserInputService")
local Players = game:GetService("Players")
local RunService = game:GetService("RunService")

local player = Players.LocalPlayer
local camera = workspace.CurrentCamera
local mouse = player:GetMouse()

-- Settings
local isSilentAimEnabled = false
local fovSize = 100
local showFovCircle = false
local targetPart = "Head"
local aimSpeed = 0.15
local checkWalls = false
local checkTeam = false
local yOffset = 60

local rainbowFOVEnabled = false
local rainbowTextEnabled = false
local rainbowHue = 0

-- Connections
local fovConnection, silentAimConnection = nil, nil
local fovCircle, fovGui = nil, nil

-- GUI
local screenGui = Instance.new("ScreenGui")
screenGui.Parent = game:GetService("CoreGui")
screenGui.Name = "SilentAimMenu"
screenGui.DisplayOrder = 10
screenGui.ResetOnSpawn = false
screenGui.Enabled = false

local frame = Instance.new("Frame")
frame.Size = UDim2.new(0, 200, 0, 450)
frame.Position = UDim2.new(0.05, 0, 0.05, 0)
frame.BackgroundColor3 = Color3.fromRGB(50,50,50)
frame.BackgroundTransparency = 0.3
frame.BorderSizePixel = 0
frame.Parent = screenGui

local function createLabel(text,posY)
    local lbl = Instance.new("TextLabel")
    lbl.Size = UDim2.new(0,180,0,20)
    lbl.Position = UDim2.new(0,10,0,posY)
    lbl.BackgroundTransparency = 1
    lbl.TextColor3 = Color3.fromRGB(255,255,255)
    lbl.Text = text
    lbl.Font = Enum.Font.SourceSans
    lbl.TextSize = 14
    lbl.Parent = frame
    return lbl
end

local function createButton(text,posY)
    local btn = Instance.new("TextButton")
    btn.Size = UDim2.new(0,180,0,30)
    btn.Position = UDim2.new(0,10,0,posY)
    btn.BackgroundColor3 = Color3.fromRGB(100,100,100)
    btn.TextColor3 = Color3.fromRGB(255,255,255)
    btn.Text = text
    btn.Font = Enum.Font.SourceSans
    btn.TextSize = 16
    btn.Parent = frame
    return btn
end

-- Title
local titleLabel = Instance.new("TextLabel")
titleLabel.Size = UDim2.new(0, 180, 0, 30)
titleLabel.Position = UDim2.new(0, 10, 0, 10)
titleLabel.BackgroundTransparency = 1
titleLabel.TextColor3 = Color3.fromRGB(255, 255, 255)
titleLabel.Text = "Silent Aim Menu"
titleLabel.Font = Enum.Font.SourceSansBold
titleLabel.TextSize = 18
titleLabel.Parent = frame

-- Buttons & Labels
local toggleSilentAimButton = createButton("Enable Silent Aim",50)
local fovLabel = createLabel("FOV Size: "..fovSize,90)
local fovSlider = Instance.new("TextButton")
fovSlider.Size = UDim2.new(0,180,0,20)
fovSlider.Position = UDim2.new(0,10,0,110)
fovSlider.BackgroundColor3 = Color3.fromRGB(100,100,100)
fovSlider.Text = ""
fovSlider.Parent = frame
local fovSliderIndicator = Instance.new("Frame")
fovSliderIndicator.Size = UDim2.new(fovSize/200,0,1,0)
fovSliderIndicator.BackgroundColor3 = Color3.fromRGB(100,100,100)
fovSliderIndicator.BorderSizePixel = 0
fovSliderIndicator.Parent = fovSlider

local aimSpeedLabel = createLabel("Aim Speed: "..aimSpeed,140)
local aimSpeedSlider = Instance.new("TextButton")
aimSpeedSlider.Size = UDim2.new(0,180,0,20)
aimSpeedSlider.Position = UDim2.new(0,10,0,160)
aimSpeedSlider.BackgroundColor3 = Color3.fromRGB(100,100,100)
aimSpeedSlider.Text = ""
aimSpeedSlider.Parent = frame
local aimSpeedSliderIndicator = Instance.new("Frame")
aimSpeedSliderIndicator.Size = UDim2.new((aimSpeed-0.1)/0.9,0,1,0)
aimSpeedSliderIndicator.BackgroundColor3 = Color3.fromRGB(100,100,100)
aimSpeedSliderIndicator.BorderSizePixel = 0
aimSpeedSliderIndicator.Parent = aimSpeedSlider

local toggleFovButton = createButton("Show FOV Circle: Off",190)
local toggleWallCheckButton = createButton("Wall Check: Off",230)
local toggleTeamCheckButton = createButton("Team Check: Off",270)
local targetLabel = createLabel("Target Part: "..targetPart,310)

local targetDropdownButton = Instance.new("TextButton")
targetDropdownButton.Size = UDim2.new(0,180,0,20)
targetDropdownButton.Position = UDim2.new(0,10,0,330)
targetDropdownButton.BackgroundColor3 = Color3.fromRGB(100,100,100)
targetDropdownButton.TextColor3 = Color3.fromRGB(255,255,255)
targetDropdownButton.Text = "â–¼"
targetDropdownButton.Parent = frame

-- Rainbow Buttons
local toggleRainbowFOVButton = createButton("Rainbow FOV: Off",370)
local toggleRainbowTextButton = createButton("Rainbow Text: Off",410)

-- Dropdown options
local dropdownOptions = {"Head","Torso","HumanoidRootPart","Left Arm","Right Arm","Left Leg","Right Leg"}
local dropdownFrame = nil

-- Dragging GUI
local isDragging=false
local dragStart=nil
local startPos=nil
titleLabel.InputBegan:Connect(function(input)
    if input.UserInputType==Enum.UserInputType.MouseButton1 then
        isDragging=true
        dragStart=input.Position
        startPos=frame.Position
    end
end)
titleLabel.InputEnded:Connect(function(input)
    if input.UserInputType==Enum.UserInputType.MouseButton1 then
        isDragging=false
    end
end)
UserInputService.InputChanged:Connect(function(input)
    if isDragging and input.UserInputType==Enum.UserInputType.MouseMovement then
        local delta=input.Position-dragStart
        frame.Position=UDim2.new(
            startPos.X.Scale,startPos.X.Offset+delta.X,
            startPos.Y.Scale,startPos.Y.Offset+delta.Y
        )
    end
end)

-- Dropdown
targetDropdownButton.MouseButton1Click:Connect(function()
    if dropdownFrame then dropdownFrame:Destroy() dropdownFrame=nil return end
    dropdownFrame=Instance.new("Frame")
    dropdownFrame.Size=UDim2.new(0,180,0,#dropdownOptions*20)
    dropdownFrame.Position=UDim2.new(0,10,0,350)
    dropdownFrame.BackgroundColor3=Color3.fromRGB(100,100,100)
    dropdownFrame.Parent=frame
    for i,opt in ipairs(dropdownOptions) do
        local btn=Instance.new("TextButton")
        btn.Size=UDim2.new(1,0,0,20)
        btn.Position=UDim2.new(0,0,0,(i-1)*20)
        btn.BackgroundColor3=Color3.fromRGB(100,100,100)
        btn.TextColor3=Color3.fromRGB(255,255,255)
        btn.Text=opt
        btn.Parent=dropdownFrame
        btn.MouseButton1Click:Connect(function()
            targetPart=opt
            targetLabel.Text="Target Part: "..targetPart
            dropdownFrame:Destroy()
            dropdownFrame=nil
        end)
    end
end)

-- FOV Circle
local function createFovCircle()
    if fovGui then fovGui:Destroy() end
    fovGui=Instance.new("ScreenGui")
    fovGui.Parent=player:WaitForChild("PlayerGui")
    fovGui.Name="FOVCircleGui"
    fovGui.DisplayOrder=1000
    fovGui.ResetOnSpawn=false
    fovGui.IgnoreGuiInset=true

    fovCircle=Instance.new("Frame")
    fovCircle.Size=UDim2.new(0,fovSize*2,0,fovSize*2)
    fovCircle.Position=UDim2.new(0,mouse.X,0,mouse.Y)
    fovCircle.AnchorPoint=Vector2.new(0.5,0.5)
    fovCircle.BackgroundTransparency=1
    fovCircle.BorderSizePixel=0
    fovCircle.Visible=showFovCircle
    fovCircle.Parent=fovGui

    local corner=Instance.new("UICorner")
    corner.CornerRadius=UDim.new(1,0)
    corner.Parent=fovCircle

    local stroke=Instance.new("UIStroke")
    stroke.Color=Color3.fromRGB(255,255,255)
    stroke.Thickness=2
    stroke.Parent=fovCircle
end

local function updateFovCircle()
    if fovCircle and fovGui then
        fovCircle.Size=UDim2.new(0,fovSize*2,0,fovSize*2)
        fovCircle.Position=UDim2.new(0,mouse.X,0,mouse.Y+yOffset)
        fovCircle.AnchorPoint=Vector2.new(0.5,0.5)
        fovCircle.Visible=showFovCircle
    end
end

-- Silent Aim functions
local function getTargetPartFunc(character,partName)
    if not character then return nil end
    if partName=="Torso" then return character:FindFirstChild("Torso") or character:FindFirstChild("UpperTorso")
    elseif partName=="HumanoidRootPart" then return character:FindFirstChild("HumanoidRootPart")
    elseif partName=="Left Arm" then return character:FindFirstChild("LeftUpperArm") or character:FindFirstChild("Left Arm")
    elseif partName=="Right Arm" then return character:FindFirstChild("RightUpperArm") or character:FindFirstChild("Right Arm")
    elseif partName=="Left Leg" then return character:FindFirstChild("LeftLowerLeg") or character:FindFirstChild("Left Leg")
    elseif partName=="Right Leg" then return character:FindFirstChild("RightLowerLeg") or character:FindFirstChild("Right Leg")
    elseif partName=="Head" then return character:FindFirstChild("Head") end
    return nil
end

local function getTargetCenterFunc(part)
    if not part then return nil end
    return part.Position+Vector3.new(0,part.Size.Y/2,0)
end

local function silentAim()
    if not isSilentAimEnabled then return end
    local closestPlayer=nil
    local shortestDistance=fovSize
    for _,otherPlayer in pairs(Players:GetPlayers()) do
        if otherPlayer~=player and otherPlayer.Character then
            local targetPartObj=getTargetPartFunc(otherPlayer.Character,targetPart)
            if targetPartObj then
                local sameTeam=false
                if checkTeam then
                    if player.Team and otherPlayer.Team and player.Team==otherPlayer.Team then sameTeam=true
                    elseif player.TeamColor and otherPlayer.TeamColor and player.TeamColor==otherPlayer.TeamColor then sameTeam=true end
                end
                local targetCenter=getTargetCenterFunc(targetPartObj)
                local screenPos,onScreen=camera:WorldToViewportPoint(targetCenter)
                local mousePos=Vector2.new(mouse.X,mouse.Y+yOffset)
                local distance=(Vector2.new(screenPos.X,screenPos.Y)-mousePos).Magnitude
                local canSee=true
                if checkWalls then
                    local rayOrigin=camera.CFrame.Position
                    local rayDirection=(targetCenter-rayOrigin).Unit*(targetCenter-rayOrigin).Magnitude
                    local raycastParams=RaycastParams.new()
                    raycastParams.FilterDescendantsInstances={player.Character}
                    raycastParams.FilterType=Enum.RaycastFilterType.Blacklist
                    local raycastResult=workspace:Raycast(rayOrigin,rayDirection,raycastParams)
                    if raycastResult and raycastResult.Instance and not raycastResult.Instance:IsDescendantOf(otherPlayer.Character) then canSee=false end
                end
                if distance<shortestDistance and onScreen and canSee then
                    shortestDistance=distance
                    closestPlayer=otherPlayer
                end
            end
        end
    end
    if closestPlayer then
        local targetPartObj=getTargetPartFunc(closestPlayer.Character,targetPart)
        local targetCenter=getTargetCenterFunc(targetPartObj)
        if targetCenter then
            local targetCFrame=CFrame.new(camera.CFrame.Position,targetCenter)
            camera.CFrame=camera.CFrame:Lerp(targetCFrame,aimSpeed)
        end
    end
end

-- Buttons functionality
toggleSilentAimButton.MouseButton1Click:Connect(function()
    isSilentAimEnabled = not isSilentAimEnabled
    toggleSilentAimButton.Text = isSilentAimEnabled and "Disable Silent Aim" or "Enable Silent Aim"

    if isSilentAimEnabled then
        if fovConnection then fovConnection:Disconnect() end
        fovConnection = RunService.RenderStepped:Connect(updateFovCircle)
        if silentAimConnection then silentAimConnection:Disconnect() end
        silentAimConnection = RunService.RenderStepped:Connect(silentAim)
        if showFovCircle and not fovCircle then createFovCircle() end
    else
        if fovConnection then fovConnection:Disconnect() fovConnection=nil end
        if silentAimConnection then silentAimConnection:Disconnect() silentAimConnection=nil end
        if fovCircle then fovCircle.Visible=false end
    end
end)

toggleFovButton.MouseButton1Click:Connect(function()
    showFovCircle = not showFovCircle
    toggleFovButton.Text = "Show FOV Circle: "..(showFovCircle and "On" or "Off")
    if showFovCircle then
        if not fovCircle then createFovCircle() end
        fovCircle.Visible=true
        updateFovCircle()
    else
        if fovCircle then fovCircle.Visible=false end
    end
end)

toggleWallCheckButton.MouseButton1Click:Connect(function()
    checkWalls = not checkWalls
    toggleWallCheckButton.Text = "Wall Check: "..(checkWalls and "On" or "Off")
end)

toggleTeamCheckButton.MouseButton1Click:Connect(function()
    checkTeam = not checkTeam
    toggleTeamCheckButton.Text = "Team Check: "..(checkTeam and "On" or "Off")
end)

-- Rainbow buttons
toggleRainbowFOVButton.MouseButton1Click:Connect(function()
    rainbowFOVEnabled = not rainbowFOVEnabled
    toggleRainbowFOVButton.Text = "Rainbow FOV: "..(rainbowFOVEnabled and "On" or "Off")
end)

toggleRainbowTextButton.MouseButton1Click:Connect(function()
    rainbowTextEnabled = not rainbowTextEnabled
    toggleRainbowTextButton.Text = "Rainbow Text: "..(rainbowTextEnabled and "On" or "Off")
end)

-- Sliders
fovSlider.MouseButton1Down:Connect(function()
    local connection
    connection = UserInputService.InputChanged:Connect(function(input)
        if input.UserInputType == Enum.UserInputType.MouseMovement then
            local relativeX = math.clamp((input.Position.X - fovSlider.AbsolutePosition.X)/fovSlider.AbsoluteSize.X,0,1)
            fovSize = math.floor(relativeX*200)
            fovSliderIndicator.Size = UDim2.new(relativeX,0,1,0)
            fovLabel.Text = "FOV Size: "..fovSize
            updateFovCircle()
        end
    end)
    UserInputService.InputEnded:Connect(function(input)
        if input.UserInputType==Enum.UserInputType.MouseButton1 then connection:Disconnect() end
    end)
end)

aimSpeedSlider.MouseButton1Down:Connect(function()
    local connection
    connection = UserInputService.InputChanged:Connect(function(input)
        if input.UserInputType==Enum.UserInputType.MouseMovement then
            local relativeX = math.clamp((input.Position.X-aimSpeedSlider.AbsolutePosition.X)/aimSpeedSlider.AbsoluteSize.X,0,1)
            aimSpeed = math.round((0.1+relativeX*0.9)*10)/10
            aimSpeedSliderIndicator.Size = UDim2.new(relativeX,0,1,0)
            aimSpeedLabel.Text = "Aim Speed: "..aimSpeed
        end
    end)
    UserInputService.InputEnded:Connect(function(input)
        if input.UserInputType==Enum.UserInputType.MouseButton1 then connection:Disconnect() end
    end)
end)

-- Rainbow Effect RenderStepped
RunService.RenderStepped:Connect(function(dt)
    if fovCircle and rainbowFOVEnabled then
        local stroke=fovCircle:FindFirstChildOfClass("UIStroke")
        if stroke then stroke.Color=Color3.fromHSV(rainbowHue,1,1) end
        rainbowHue=(rainbowHue+dt*0.5)%1
    end
    if rainbowTextEnabled then
        for _, obj in ipairs(frame:GetChildren()) do
            if obj:IsA("TextLabel") or obj:IsA("TextButton") then
                obj.TextColor3=Color3.fromHSV(rainbowHue,1,1)
            end
        end
        rainbowHue=(rainbowHue+dt*0.5)%1
    end
end)

-- Toggle GUI with L+LeftAlt
UserInputService.InputBegan:Connect(function(input, gameProcessed)
    if gameProcessed then return end
    if input.KeyCode==Enum.KeyCode.L and UserInputService:IsKeyDown(Enum.KeyCode.LeftAlt) then
        screenGui.Enabled = not screenGui.Enabled
        print("Silent Aim GUI:", screenGui.Enabled and "Visible ðŸŸ¢" or "Hidden ðŸ”´")
    end
end)

print("Silent Aim Script with FOV, Rainbow Text & FOV Circle loaded!")

--loadstring(game:HttpGet("https://raw.githubusercontent.com/Owen-devx/script-Test/refs/heads/main/AimLock"))()
